<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <meta content="telephone=no" name="format-detection">
    <meta content="中集速运、中集速运" name="keywords">
    <meta content="中集速运、中集速运" name="description">
    <meta content="Li Zhen Ya Team" name="author">
    <title>中集速运-个人注册</title>
    <link type="text/css" rel="stylesheet" href="theme/css/core.css">
    <link type="text/css" rel="stylesheet" href="theme/css/home.css">
    <link rel="stylesheet" href="theme/layui/css/layui.css">
    <script src="theme/layui/layui.js"></script>
    <script type="text/javascript" src="theme/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="theme/layui/layui.all.js"></script>
    <style>
        /*更改下拉框选项选中颜色*/
        .layui-form-select dl dd.layui-this {
            background-color: #f39800
        }
    </style>
</head>
<body>

<header id="lzy-header">
    <div class="lzy-container clearfix">
        <div class="lzy-he-logo">
            <h1>
                <a href="index.html"><img src="theme/img/logo.png" title="" about="" name=""></a>
            </h1>
        </div>
    </div>
</header>
<section>
    <div class="lzy-content" id="lzy-adaption">
        <div class="lzy-boxes lzy-boxes-reg">
            <div class="lzy-shadow">
                <h2>工作人员资料注册</h2>
            </div>

            <div class="login_m">
                <div class="login_boder">
                    <div class="login_padding">

                        <h2>姓名</h2>
                        <label>
                            <input type="text" id="username" class="txt_input txt_input2" value="" placeholder="">
                        </label>
                        <h2>密码</h2>
                        <label>
                            <input type="password" id="passwd1" name="" class="txt_input" placeholder="">
                        </label>
                        <h2>重复密码</h2>
                        <label>
                            <input type="password" id="passwd2" name="" class="txt_input">
                        </label>
                        <h2>电话</h2>
                        <label>
                            <input type="text" id="phone" class="txt_input txt_input2" value="" placeholder="">
                        </label>

                        <form class="layui-form">
                            <h2>地址</h2>
                            <label>
                                <div class="layui-input-inline" style="width:260px">
                                    <select id="sn1" lay-filter="sn1" lay-verify="required" class="layui-form-select">
                                        <option value="">请选择省</option>
                                        <option value="110000">北京市</option>
                                        <option value="120000">天津市</option>
                                        <option value="130000">河北省</option>
                                        <option value="140000">山西省</option>
                                        <option value="150000">内蒙古自治区</option>
                                        <option value="210000">辽宁省</option>
                                        <option value="220000">吉林省</option>
                                        <option value="230000">黑龙江省</option>
                                        <option value="310000">上海市</option>
                                        <option value="320000">江苏省</option>
                                        <option value="330000">浙江省</option>
                                        <option value="340000">安徽省</option>
                                        <option value="350000">福建省</option>
                                        <option value="360000">江西省</option>
                                        <option value="370000">山东省</option>
                                        <option value="410000">河南省</option>
                                        <option value="420000">湖北省</option>
                                        <option value="430000">湖南省</option>
                                        <option value="440000">广东省</option>
                                        <option value="450000">广西壮族自治区</option>
                                        <option value="460000">海南省</option>
                                        <option value="500000">重庆市</option>
                                        <option value="510000">四川省</option>
                                        <option value="520000">贵州省</option>
                                        <option value="530000">云南省</option>
                                        <option value="540000">西藏自治区</option>
                                        <option value="610000">陕西省</option>
                                        <option value="620000">甘肃省</option>
                                        <option value="630000">青海省</option>
                                        <option value="640000">宁夏回族自治区</option>
                                        <option value="650000">新疆维吾尔自治区</option>
                                        <option value="710000">台湾省</option>
                                        <option value="810000">香港特别行政区</option>
                                        <option value="820000">澳门特别行政区</option>
                                    </select>
                                </div>
                                <div class="layui-input-inline" style="width:260px">
                                    <select id="sn2" lay-filter="sn2" class="layui-form-select">
                                        <option value="">请选择市</option>
                                    </select>
                                </div>
                                <div class="layui-input-inline" style="width:260px">
                                    <select id="sn3" lay-filter="sn3" class="layui-form-select">
                                        <option value="">请选择县/区</option>
                                    </select>
                                </div>
                            </label>

                            <h2 style="margin-top: 10px">角色</h2>
                            <label>
                                <div class="layui-input-inline" style="width:260px">
                                    <select id="role" lay-filter="role" lay-verify="required" class="layui-form-select">
                                        <option value="">请选择用户角色</option>
                                        <option value="0">快递员</option>
                                        <option value="3">转运员</option>
                                    </select>
                                </div>
                            </label>
                        </form>

                        <div class="rem_sub">

                            <div class="clearfix">
                                <input type="submit" class="sub_button" name="button" id="button"
                                       value="注册">
                            </div>
                            <div class="reg"><a href="sign.html">我有帐号，去登录</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="height:100px;"></div>
    </div>
</section>


<footer>
    <div class="lzy-adaption">
        <div class="lzy-copyright">
            <p>Copyright © 2019 anli-2. All Rights Reserved.</p>
        </div>
    </div>
</footer>
<script>
    $(function () {
        $("#button").click(function () {
            var user = new Object();
            var username = $("input#username").val();
            var passwd1 = $("input#passwd1").val();
            var passwd2 = $("input#passwd2").val();
            var phone = $("input#phone").val();
            // alert("username:" + username + "  " + "passwd:" + passwd1);
            if (passwd1 == passwd2) {
                user.name = username;
                user.PWD = passwd1;
                user.telCode = phone;
                user.URull = 0;
                user.status = 0;
                $.ajax({
                    url: 'http://localhost:8080/TestCxfHibernate/REST/Misc/register?_type=json',
                    type: 'post',
                    data: JSON.stringify(user),
                    dataType: "json",
                    contentType: 'application/json;charset=UTF-8',
                    success: function (data) {
                        layer.open({
                            title: '操作成功'
                            , content: 'UID为 ' + data + '请使用UID登陆！'
                        });
                    },
                    error: function () {
                        layer.open({
                            title: '操作失败'
                            , content: '请重新注册！'
                        });
                    }
                });
            } else {
                layer.open({
                    title: '前后密码不一致'
                    , content: '请重新输入密码！'
                });
            }
        });


        //使from表单中下拉框显示
        layui.use('form', function () {
            var form = layui.form;
            form.render();
            form.on('select(sn1)', function (data) {
                var next = $("#sn2");
                if (data.value != '') {
                    $.ajax({
                        url: '/TestCxfHibernate/REST/Misc/getCityList/'
                            + data.value
                            + '?_type=json',
                        type: "GET",
                        dataType: "json",
                        contentType: 'application/json;charset=UTF-8',
                        asyn: false,
                        success: function (data) {
                            var list = data;
                            next.empty();
                            next.append("<option value=''>请选择市</option>");
                            $.each(list, function (idx, obj) {
                                next.append('<option value="' + obj.Code + '">' + obj.Name + '</option>');
                            });
                            form.render('select');
                        },
                        error: function () {
                            layer.open({
                                title: '生成失败',
                                content: '请重新生成！'
                            });
                        }
                    })
                }

            });
            form.on('select(sn2)', function (data) {
                var next = $("#sn3");
                if (data.value != '') {
                    $.ajax({
                        url: '/TestCxfHibernate/REST/Misc/getTownList/'
                            + data.value
                            + '?_type=json',
                        type: "GET",
                        dataType: "json",
                        contentType: 'application/json;charset=UTF-8',
                        asyn: false,
                        success: function (data) {
                            var list = data;
                            next.empty();
                            next.append("<option value=''>请选择县/区</option>");
                            $.each(list, function (idx, obj) {
                                next.append("<option value=" + obj.Code + ">" + obj.Name + "</option>");
                            });
                            form.render('select');
                        },
                        error: function () {
                            layer.open({
                                title: '生成失败',
                                content: '请重新生成！'
                            });
                        }
                    })
                }
            });
        });

    });

    //使from表单中下拉框显示
    layui.use('form', function () {
        var form = layui.form;
        form.render();
    });
</script>
</body>
</html>